<!--==============================
Calendar Area  
==============================-->
<section class="space bg-white overflow-hidden" id="calander">
    <div class="container">
        <div class="title-area text-center mb-5">
            <span class="sub-title style2 text-anim" data-cue="slideInUp">Calendar</span>
            <h2 class="sec-title text-anim" data-cue="slideInUp">Do not Miss our Memorable Events</h2>
        </div>
        
        <div class="calendar-grid-container">
            <!-- Row 1: January - May -->
            <div class="row g-4 mb-4">
                <div class="col-lg-2-4 col-md-6">
                    <div class="calendar-month-card bg-primary" data-cue="slideInUp" data-month="1">
                        <div class="calendar-icon">
                            <i class="fas fa-star"></i>
                        </div>
                        <h3 class="calendar-month">January</h3>
                        <div class="calendar-theme">New Beginnings</div>
                    </div>
                </div>
                <div class="col-lg-2-4 col-md-6">
                    <div class="calendar-month-card bg-warning" data-cue="slideInUp" data-delay="100" data-month="2">
                        <div class="calendar-icon">
                            <i class="fas fa-star"></i>
                        </div>
                        <h3 class="calendar-month">February</h3>
                        <div class="calendar-theme">Health & Wellness</div>
                    </div>
                </div>
                <div class="col-lg-2-4 col-md-6">
                    <div class="calendar-month-card bg-primary" data-cue="slideInUp" data-delay="200" data-month="3">
                        <div class="calendar-icon">
                            <i class="fas fa-star"></i>
                        </div>
                        <h3 class="calendar-month">March</h3>
                        <div class="calendar-theme">Spring Activities</div>
                    </div>
                </div>
                <div class="col-lg-2-4 col-md-6">
                    <div class="calendar-month-card bg-warning" data-cue="slideInUp" data-delay="300" data-month="4">
                        <div class="calendar-icon">
                            <i class="fas fa-star"></i>
                        </div>
                        <h3 class="calendar-month">April</h3>
                        <div class="calendar-theme">Easter Celebrations</div>
                    </div>
                </div>
                <div class="col-lg-2-4 col-md-6">
                    <div class="calendar-month-card bg-primary" data-cue="slideInUp" data-delay="400" data-month="5">
                        <div class="calendar-icon">
                            <i class="fas fa-star"></i>
                        </div>
                        <h3 class="calendar-month">May</h3>
                        <div class="calendar-theme">Family Month</div>
                    </div>
                </div>
            </div>
            
            <!-- Row 2: June - July with Description -->
            <div class="row g-4 mb-4">
                <div class="col-lg-2 col-md-4">
                    <div class="calendar-month-card bg-warning" data-cue="slideInUp" data-month="6">
                        <div class="calendar-icon">
                            <i class="fas fa-hand-holding-heart"></i>
                        </div>
                        <h3 class="calendar-month">June</h3>
                        <div class="calendar-theme">Charity & Pride</div>
                    </div>
                </div>
                
                <!-- Description Box spanning 3 columns -->
                <div class="col-lg-8 col-md-4">
                    <div class="calendar-description-box" data-cue="slideInUp" data-delay="200">
                        <div class="description-content">
                            <p>At Care365, we are committed to creating a nurturing and sustainable 
                                environment for our cherished residents. As part of our ongoing efforts
                                to integrate Environmental, Social, and Governance (ESG) principles into 
                                our daily operations, we are excited to share our ESG calendar for the upcoming months!</p>
                        </div>
                    </div>
                </div>
                
                <div class="col-lg-2 col-md-4">
                    <div class="calendar-month-card bg-warning" data-cue="slideInUp" data-delay="400" data-month="7">
                        <div class="calendar-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <h3 class="calendar-month">July</h3>
                        <div class="calendar-theme">Community</div>
                    </div>
                </div>
            </div>
            
            <!-- Row 3: August - December -->
            <div class="row g-4">
                <div class="col-lg-2-4 col-md-6">
                    <div class="calendar-month-card bg-primary" data-cue="slideInUp" data-month="8">
                        <div class="calendar-icon">
                            <i class="fas fa-heart"></i>
                        </div>
                        <h3 class="calendar-month">August</h3>
                        <div class="calendar-theme">Spreading Love</div>
                    </div>
                </div>
                <div class="col-lg-2-4 col-md-6">
                    <div class="calendar-month-card bg-warning" data-cue="slideInUp" data-delay="100" data-month="9">
                        <div class="calendar-icon">
                            <i class="fas fa-star"></i>
                        </div>
                        <h3 class="calendar-month">September</h3>
                        <div class="calendar-theme">Autumn Joy</div>
                    </div>
                </div>
                <div class="col-lg-2-4 col-md-6">
                    <div class="calendar-month-card bg-primary" data-cue="slideInUp" data-delay="200" data-month="10">
                        <div class="calendar-icon">
                            <i class="fas fa-leaf"></i>
                        </div>
                        <h3 class="calendar-month">October</h3>
                        <div class="calendar-theme">The Environment</div>
                    </div>
                </div>
                <div class="col-lg-2-4 col-md-6">
                    <div class="calendar-month-card bg-warning" data-cue="slideInUp" data-delay="300" data-month="11">
                        <div class="calendar-icon">
                            <i class="fas fa-home"></i>
                        </div>
                        <h3 class="calendar-month">November</h3>
                        <div class="calendar-theme">Wellbeing</div>
                    </div>
                </div>
                <div class="col-lg-2-4 col-md-6">
                    <div class="calendar-month-card bg-primary" data-cue="slideInUp" data-delay="400" data-month="12">
                        <div class="calendar-icon">
                            <i class="fas fa-birthday-cake"></i>
                        </div>
                        <h3 class="calendar-month">December</h3>
                        <div class="calendar-theme">Celebrating</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Event Modal - Minimalist Design -->
<div class="modal fade" id="eventModal" tabindex="-1" aria-labelledby="eventModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h6 class="modal-title" id="eventModalLabel">
                    <span id="modalMonthName">January</span> 2026
                </h6>
                <button type="button" class="btn-close btn-close-sm" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div id="modalCalendarDays" class="calendar-days-grid mb-3"></div>
                <div id="modalEventsList" class="events-list"></div>
            </div>
        </div>
    </div>
</div>

<style>

        /*==============================
        Calendar Area Styles - Compact
        ==============================*/
        
        /* Custom column for 5-column layout */
        .col-lg-2-4 {
            flex: 0 0 auto;
            width: 20%;
        }
        
        /* Calendar Month Card */
        .calendar-month-card {
            border-radius: 12px;
            padding: 20px 15px;
            text-align: center;
            color: white;
            transition: all 0.3s ease;
            min-height: 140px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }
        
        .calendar-month-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        
        .calendar-month-card.bg-primary {
            background: linear-gradient(135deg, var(--bs-primary) 0%, #0b5ed7 100%);
        }
        
        .calendar-month-card.bg-warning {
            background: linear-gradient(135deg, var(--bs-warning) 0%, #ffed4e 100%);
            color: #2c3e50 !important;
        }
        
        .calendar-month-card.bg-white {
            background: white;
            color: #2c3e50 !important;
            box-shadow: 0 3px 15px rgba(0, 0, 0, 0.08);
            border: 1px solid rgba(0, 0, 0, 0.08);
        }
        
        .calendar-icon {
            font-size: 32px;
            margin-bottom: 10px;
            transition: transform 0.3s ease;
        }
        
        .calendar-month-card:hover .calendar-icon {
            transform: scale(1.05);
        }
        
        .calendar-month {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 4px;
            font-family: 'Fredoka', sans-serif;
        }
        
        .calendar-theme {
            font-size: 12px;
            opacity: 0.9;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        /* Calendar Description Box */
        .calendar-description-box {
            background: white;
            padding: 25px;
            height: 100%;
            display: flex;
            align-items: center;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .description-content p {
            color: #6c757d;
            font-size: 14px;
            line-height: 1.6;
            margin-bottom: 10px;
        }
        
        .description-content p:last-child {
            margin-bottom: 0;
        }
        
        /* Modal Styles - Apple-inspired Minimalist */
        .modal-dialog {
            max-width: 380px;
            background: white;
            border-radius: 20px;
        }
        
        .modal-content {
            border: none;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
            backdrop-filter: blur(20px);
            background: rgba(255, 255, 255, 0.98);
        }
        
        .modal-header {
            background: white;
            border-bottom: 1px solid rgba(0, 0, 0, 0.06);
            padding: 16px 20px 12px;
            border-radius: 20px 20px 0 0;
        }
        
        .modal-title {
            font-size: 15px;
            font-weight: 600;
            color: #1d1d1f;
            margin: 0;
            letter-spacing: -0.2px;
        }
        
        .modal-body {
            padding: 16px 20px 20px;
        }
        
        .btn-close {
            width: 30px;
            height: 30px;
            opacity: 1;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            border-radius: 50%;
            background: #d1d1d6;  /* ← THIS IS THE GRAY BACKGROUND */
            background-image: none;
            position: relative;
            padding: 0;
        }

        .btn-close::before,
        .btn-close::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 14px;
            height: 2px;
            background: #ffffff;  /* ← THIS IS THE WHITE X ICON */
            border-radius: 2px;
            transition: background 0.2s ease;
        }

        .btn-close::before {
            transform: translate(-50%, -50%) rotate(45deg);
        }

        .btn-close::after {
            transform: translate(-50%, -50%) rotate(-45deg);
        }

        .btn-close:hover {
            background: #a1a1a6;  /* ← DARKER GRAY ON HOVER */
            transform: scale(1.05);
        }

        .btn-close:hover::before,
        .btn-close:hover::after {
            background: #ffffff;  /* ← WHITE X ON HOVER */
        }

        .btn-close:active {
            transform: scale(0.95);
        }
        
        .calendar-days-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 3px;
            margin-bottom: 12px;
        }
        
        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            font-weight: 500;
            font-size: 13px;
            transition: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: default;
            background: white;
            color: #86868b;
        }
        
        .calendar-day.has-event {
            background: #007aff;
            color: white;
            cursor: pointer;
            font-weight: 600;
        }
        
        .calendar-day.has-event:hover {
            transform: scale(1.05);
            background: #0051d5;
        }
        
        .calendar-day.has-event:active {
            transform: scale(0.98);
        }
        
        .calendar-day.today {
            position: relative;
        }
        
        .calendar-day.today::after {
            content: '';
            position: absolute;
            bottom: 2px;
            left: 50%;
            transform: translateX(-50%);
            width: 4px;
            height: 4px;
            background: #007aff;
            border-radius: 50%;
        }
        
        .calendar-day.today.has-event::after {
            background: white;
        }
        
        .calendar-day-header {
            font-weight: 600;
            color: #86868b;
            background: transparent;
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        /* Events List - Apple Style */
        .events-list {
            max-height: 280px;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }
        
        .events-list::-webkit-scrollbar {
            width: 4px;
        }
        
        .events-list::-webkit-scrollbar-track {
            background: transparent;
        }
        
        .events-list::-webkit-scrollbar-thumb {
            background: rgba(0, 0, 0, 0.1);
            border-radius: 10px;
        }
        
        .event-card {
            background: #f5f5f7;
            border-radius: 12px;
            padding: 12px 14px;
            margin-bottom: 8px;
            transition: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);
            border: none;
        }
        
        .event-card:hover {
            background: #e8e8ed;
            transform: scale(1.01);
        }
        
        .event-card:active {
            transform: scale(0.99);
        }
        
        .event-date-badge {
            display: inline-block;
            background: #007aff;
            color: white;
            padding: 3px 10px;
            border-radius: 10px;
            font-size: 11px;
            font-weight: 600;
            margin-bottom: 6px;
            letter-spacing: -0.1px;
        }
        
        .event-card h6 {
            color: #1d1d1f;
            font-weight: 600;
            margin-bottom: 4px;
            font-size: 14px;
            letter-spacing: -0.2px;
            line-height: 1.3;
        }
        
        .event-card p {
            color: #86868b;
            margin-bottom: 6px;
            font-size: 12px;
            line-height: 1.4;
            letter-spacing: -0.1px;
        }
        
        .event-details {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 6px;
        }
        
        .event-detail-item {
            display: flex;
            align-items: center;
            color: #86868b;
            font-size: 11px;
            letter-spacing: -0.1px;
        }
        
        .event-detail-item i {
            color: #007aff;
            margin-right: 4px;
            font-size: 11px;
        }
        
        .no-events {
            text-align: center;
            padding: 40px 20px;
            color: #86868b;
        }
        
        .no-events i {
            font-size: 28px;
            color: #d2d2d7;
            margin-bottom: 8px;
        }
        
        .no-events p {
            font-size: 13px;
            margin: 0;
            letter-spacing: -0.1px;
        }
        
        /* Responsive Design */
        @media (max-width: 1199px) {
            .col-lg-2-4 {
                width: 33.333%;
            }
        }
        
        @media (max-width: 991px) {
            .col-lg-2-4 {
                width: 50%;
            }
            
            .calendar-month-card {
                min-height: 130px;
                padding: 18px 12px;
            }
            
            .calendar-icon {
                font-size: 28px;
            }
            
            .calendar-month {
                font-size: 18px;
            }
            
            .calendar-description-box {
                padding: 20px;
            }
        }
        
        @media (max-width: 767px) {
            .col-lg-2-4 {
                width: 50%;
            }
            
            .calendar-month-card {
                min-height: 120px;
                padding: 15px 10px;
            }
            
            .calendar-icon {
                font-size: 26px;
                margin-bottom: 8px;
            }
            
            .calendar-month {
                font-size: 17px;
            }
            
            .calendar-theme {
                font-size: 11px;
            }
            
            .description-content p {
                font-size: 13px;
                line-height: 1.5;
            }
            
            .modal-dialog {
                max-width: calc(100% - 20px);
                margin: 10px;
            }
            
            .modal-content {
                border-radius: 16px;
            }
            
            .modal-header {
                padding: 14px 16px 10px;
            }
            
            .modal-body {
                padding: 12px 16px 16px;
            }
            
            .calendar-days-grid {
                gap: 2px;
            }
            
            .calendar-day {
                font-size: 12px;
                border-radius: 6px;
            }
            
            .events-list {
                max-height: 240px;
            }
            
            .event-card {
                padding: 10px 12px;
                border-radius: 10px;
            }
        }
        
        @media (max-width: 575px) {
            .col-lg-2-4 {
                width: 100%;
            }
            
            .calendar-month-card {
                min-height: 110px;
                max-width: 280px;
                margin: 0 auto;
            }
            
            .modal-dialog {
                max-width: calc(100% - 16px);
                margin: 8px;
            }
            
            .modal-title {
                font-size: 14px;
            }
            
            .modal-header {
                padding: 12px 14px 8px;
            }
            
            .modal-body {
                padding: 10px 14px 14px;
            }
            
            .btn-close {
                width: 24px;
                height: 24px;
            }
        }
        
        @media (max-width: 380px) {
            .calendar-day {
                font-size: 11px;
            }
            
            .calendar-day-header {
                font-size: 9px;
            }
            
            .event-card h6 {
                font-size: 13px;
            }
            
            .event-card p,
            .event-detail-item {
                font-size: 11px;
            }
        }
</style>

<script>
// Month configuration with event data (this would come from your Laravel backend)
const monthNames = ['January', 'February', 'March', 'April', 'May', 'June', 
                    'July', 'August', 'September', 'October', 'November', 'December'];

// Initialize modal functionality
document.addEventListener('DOMContentLoaded', function() {
    const calendarCards = document.querySelectorAll('.calendar-month-card[data-month]');
    const eventModal = new bootstrap.Modal(document.getElementById('eventModal'));
    
    calendarCards.forEach(card => {
        card.addEventListener('click', function() {
            const month = parseInt(this.dataset.month);
            loadMonthEvents(month);
            eventModal.show();
        });
    });
});

function loadMonthEvents(month) {
    const currentYear = new Date().getFullYear();
    const modalMonthName = document.getElementById('modalMonthName');
    const modalCalendarDays = document.getElementById('modalCalendarDays');
    const modalEventsList = document.getElementById('modalEventsList');
    
    modalMonthName.textContent = monthNames[month - 1];
    
    // Fetch events from Laravel backend
    fetch(`/events?month=${month}&year=${currentYear}`)
        .then(response => {
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            return response.json();
        })
        .then(data => {
            renderCalendar(month, currentYear, data.events);
            renderEvents(data.events);
        })
        .catch(error => {
            console.error('Error loading events:', error);
            // Show empty state with error message
            renderCalendar(month, currentYear, []);
            renderEvents([]);
        });
}

function renderCalendar(month, year, events) {
    const modalCalendarDays = document.getElementById('modalCalendarDays');
    const firstDay = new Date(year, month - 1, 1).getDay();
    const daysInMonth = new Date(year, month, 0).getDate();
    const today = new Date();
    
    // Create event map for quick lookup
    const eventMap = {};
    events.forEach(event => {
        const day = new Date(event.event_date).getDate();
        if (!eventMap[day]) eventMap[day] = [];
        eventMap[day].push(event);
    });
    
    let calendarHTML = '';
    
    // Day headers
    const dayHeaders = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
    dayHeaders.forEach(day => {
        calendarHTML += `<div class="calendar-day calendar-day-header">${day}</div>`;
    });
    
    // Empty cells before first day
    for (let i = 0; i < firstDay; i++) {
        calendarHTML += '<div class="calendar-day"></div>';
    }
    
    // Days of month
    for (let day = 1; day <= daysInMonth; day++) {
        const hasEvent = eventMap[day] && eventMap[day].length > 0;
        const isToday = today.getDate() === day && 
                        today.getMonth() === month - 1 && 
                        today.getFullYear() === year;
        
        let classes = 'calendar-day';
        if (hasEvent) classes += ' has-event';
        if (isToday) classes += ' today';
        
        calendarHTML += `<div class="${classes}" data-day="${day}">${day}</div>`;
    }
    
    modalCalendarDays.innerHTML = calendarHTML;
    
    // Add click handlers to days with events
    document.querySelectorAll('.calendar-day.has-event').forEach(dayEl => {
        dayEl.addEventListener('click', function() {
            const day = parseInt(this.dataset.day);
            scrollToEvent(day);
        });
    });
}

function renderEvents(events) {
    const modalEventsList = document.getElementById('modalEventsList');
    
    if (!events || events.length === 0) {
        modalEventsList.innerHTML = `
            <div class="no-events">
                <i class="fas fa-calendar-times"></i>
                <p>No events this month</p>
            </div>
        `;
        return;
    }
    
    // Sort events by date
    events.sort((a, b) => new Date(a.event_date) - new Date(b.event_date));
    
    let eventsHTML = '';
    events.forEach(event => {
        const eventDate = new Date(event.event_date);
        const dateStr = eventDate.toLocaleDateString('en-US', { 
            month: 'short', 
            day: 'numeric' 
        });
        
        const timeStr = event.event_time ? 
            new Date(`2000-01-01 ${event.event_time}`).toLocaleTimeString('en-US', { 
                hour: 'numeric', 
                minute: '2-digit' 
            }) : '';
        
        eventsHTML += `
            <div class="event-card" data-day="${eventDate.getDate()}">
                <div class="event-date-badge">${dateStr}</div>
                <h6>${event.title}</h6>
                ${event.description ? `<p>${event.description}</p>` : ''}
                <div class="event-details">
                    ${timeStr ? `
                        <div class="event-detail-item">
                            <i class="fas fa-clock"></i>
                            <span>${timeStr}</span>
                        </div>
                    ` : ''}
                    ${event.location ? `
                        <div class="event-detail-item">
                            <i class="fas fa-map-marker-alt"></i>
                            <span>${event.location}</span>
                        </div>
                    ` : ''}
                </div>
            </div>
        `;
    });
    
    modalEventsList.innerHTML = eventsHTML;
}

function scrollToEvent(day) {
    const eventCard = document.querySelector(`.event-card[data-day="${day}"]`);
    if (eventCard) {
        eventCard.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        eventCard.style.animation = 'pulse 0.5s';
        setTimeout(() => {
            eventCard.style.animation = '';
        }, 500);
    }
}
</script>